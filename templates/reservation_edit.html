{% extends 'base.html' %}

{% block header %}
  <h3>{% block title %}Reservierung ändern für {{ date.strftime("%a, den %d.%m.%Y") }}{% endblock %}</h3>
{% endblock %}


{% block content %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/css/bootstrap-select.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/js/bootstrap-select.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>


<form action="" method="POST">

    <div class="form-group">
        <label for="mensch">Wer schläft hier nachts?</label>
        <select name="mensch" class="selectpicker form-control" multiple data-live-search="true">
        {% for mensch in menschen %}
            {% if mensch.id in already_reserved %}
                <option selected value="{{ mensch.id }}">{{ mensch.name }}</option>
            {% else %}
                <option value="{{ mensch.id }}">{{ mensch.name }}</option>
            {% endif %}
        {% endfor %}
        </select>
        </div>
   <button class="btn btn-primary" type="submit">speichern</button>
</form>

</br>
<h4>Infos zur Unterkunft</h4>
<table class="table">
  <tbody>
    <tr>
      <td>Name</td>
      <td>{{ sleeping_place.name }} ({{ sleeping_place.pronoun }})</td>
    </tr>
    <tr>
      <td>Addresse</td>
      <td>{{ sleeping_place.address }} <a href="https://www.google.com/maps/search/{{ sleeping_place.address }}" >(Google Maps)</a></td>
    </tr>
    <tr>
      <td>Schlafplätze ohne Isomatte</td>
      <td>{{ sleeping_place.sleeping_places_basic }}</td>
    </tr>
    <tr>
      <td>Schlafplätze mit Isomatte</td>
      <td>{{ sleeping_place.sleeping_places_luxury }}</td>
    </tr>
    <tr>
      <td>Zeitraum</td>
      {% if sleeping_place.date_from_june %}
        <td>{{ sleeping_place.date_from_june.strftime("%d.%m. (%a)") }}
      {% else %}
        <td>nicht angegeben
      {% endif %}
      bis
      {% if sleeping_place.date_to_june %}
        {{ sleeping_place.date_to_june.strftime("%d.%m. (%a)") }}
      {% else %}
        nicht angegeben</td>
      {% endif %}
      {% if sleeping_place.date_from_june and sleeping_place.date_to_june %} 
        - {{ (sleeping_place.date_to_june - sleeping_place.date_from_june).days }} Tage
      {% endif %}
      </td>
    </tr>

  </tbody>
</table>


{% endblock %}

